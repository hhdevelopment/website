"use strict";(self.webpackChunksoftwarity=self.webpackChunksoftwarity||[]).push([[789],{8096:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>o});var n=r(5893),i=r(1151);const t={slug:"intro",title:"Introduction",authors:"fachache",tags:[]},c=void 0,l={id:"pres/intro",title:"Introduction",description:"ARCHWAY est n\xe9e du constat que la plupart des projets bas\xe9s sur une architecture microservice avaient les m\xeames besoins.",source:"@site/versioned_docs/version-1.0.1/pres/intro.md",sourceDirName:"pres",slug:"/pres/intro",permalink:"/1.0.1/pres/intro",draft:!1,unlisted:!1,editUrl:"https://github.com/softwarity/website/tree/main/versioned_docs/version-1.0.1/pres/intro.md",tags:[],version:"1.0.1",frontMatter:{slug:"intro",title:"Introduction",authors:"fachache",tags:[]},sidebar:"presSidebar",next:{title:"Fonctionnalit\xe9s",permalink:"/1.0.1/pres/features"}},a={},o=[{value:"ARCHWAY: Une APP Gateway",id:"archway-une-app-gateway",level:2},{value:"API Gateway",id:"api-gateway",level:3},{value:"Architecture microservices",id:"architecture-microservices",level:3},{value:"Implications",id:"implications",level:3},{value:"APP Gateway",id:"app-gateway",level:3}];function d(e){const s={admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["ARCHWAY est n\xe9e du constat que la plupart des projets bas\xe9s sur une architecture microservice avaient les m\xeames besoins.\nAu sein des entreprises souvent les \xe9quipes, par m\xe9connaissance, par insatisfaction des ",(0,n.jsx)(s.code,{children:"API Gateway"})," existantes ou simplement par choix, pr\xe9ferent d\xe9velopper leur propre solution."]}),"\n",(0,n.jsxs)(s.p,{children:["Souvent cette solution s'appelle ",(0,n.jsx)(s.code,{children:"PORTAL"}),", ",(0,n.jsx)(s.code,{children:"GATE"})," ou quelque chose comme cela. Si vous vous reconnaissez dans ce cas, vous \xeates au bon endroit."]}),"\n",(0,n.jsx)(s.p,{children:"En g\xe9n\xe9ral une solution \xe0 fa\xe7on permet de contr\xf4ler plus facilement un certain nombre de points comme la gestion des utilisateurs."}),"\n",(0,n.jsx)(s.h2,{id:"archway-une-app-gateway",children:"ARCHWAY: Une APP Gateway"}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsxs)(s.p,{children:["Archway est une ",(0,n.jsx)(s.code,{children:"Application gateway"})," une sorte de super ",(0,n.jsx)(s.code,{children:"API Gateway"}),"."]})}),"\n",(0,n.jsxs)(s.p,{children:["Pour faire cours, si vous savez ce qu'est une ",(0,n.jsx)(s.code,{children:"API Gateway"}),", vous allez tr\xe8s vite comprendre ce qu'est une ",(0,n.jsx)(s.code,{children:"APP Gateway"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Surtout ",(0,n.jsx)(s.code,{children:"ARCHWAY"})," propose une interface utilisateur compl\xe8te permettant de contr\xf4ler toutes ses fonctionnalit\xe9s."]}),"\n",(0,n.jsx)(s.h3,{id:"api-gateway",children:"API Gateway"}),"\n",(0,n.jsxs)(s.p,{children:["Une ",(0,n.jsx)(s.code,{children:"API Gateway"})," est un service qui g\xe8re principalement le routage des requ\xeates issues d'une application bas\xe9e sur une architecture microservice et plus particuli\xe8rement dans un ",(0,n.jsx)(s.code,{children:"cluster"}),"."]}),"\n",(0,n.jsx)(s.admonition,{type:"note",children:(0,n.jsxs)(s.p,{children:["Dans une architecture microservice l'application n'est plus construite sur ",(0,n.jsx)(s.strong,{children:"un"})," ",(0,n.jsx)(s.code,{children:"client"})," et ",(0,n.jsx)(s.strong,{children:"un"})," server, mais plut\xf4t ",(0,n.jsx)(s.strong,{children:"un"})," ",(0,n.jsx)(s.code,{children:"client"})," ",(0,n.jsx)(s.strong,{children:"(voir plusieurs)"})," et de ",(0,n.jsx)(s.strong,{children:"multiple"})," microservices."]})}),"\n",(0,n.jsx)(s.h3,{id:"architecture-microservices",children:"Architecture microservices"}),"\n",(0,n.jsx)(s.p,{children:"L'architecture microservice est une bonne architecture car elle permet entre autre:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Scalabilit\xe9 Facilit\xe9e"})," : Les microservices permettent de faire \xe9voluer chaque service individuellement en fonction de ses besoins. Cela facilite la mise \xe0 l'\xe9chelle horizontale des services qui n\xe9cessitent plus de ressources sans avoir \xe0 mettre \xe0 l'\xe9chelle l'ensemble de l'application."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"D\xe9veloppement Agile"})," : Les \xe9quipes de d\xe9veloppement peuvent travailler de mani\xe8re autonome sur des microservices sp\xe9cifiques. Cela favorise le d\xe9veloppement agile, acc\xe9l\xe8re le d\xe9ploiement et permet de mettre en production plus fr\xe9quemment."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Isolation des Erreurs"})," : En cas d'\xe9chec ou de bug dans un microservice, cela n'affecte g\xe9n\xe9ralement pas l'ensemble du syst\xe8me. Les erreurs sont isol\xe9es, ce qui facilite le diagnostic et la r\xe9solution."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Technologies Adapt\xe9es"})," : Chaque microservice peut \xeatre d\xe9velopp\xe9 en utilisant la technologie la plus adapt\xe9e \xe0 son cas d'utilisation, ce qui permet d'utiliser diff\xe9rentes technologies au sein de l'application."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Meilleure Utilisation des Ressources"})," : Les ressources mat\xe9rielles et logicielles peuvent \xeatre allou\xe9es plus efficacement car chaque microservice peut s'ex\xe9cuter sur des serveurs ind\xe9pendants."]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"implications",children:"Implications"}),"\n",(0,n.jsx)(s.p,{children:"Comme dit pr\xe9c\xe9dement nous n'avons plus un serveur adressable par son adresse, mais de multiple services."}),"\n",(0,n.jsxs)(s.p,{children:["Ces derniers doivent \xeatre adress\xe9s de sorte d'\xeatre joignables facilement par le ",(0,n.jsx)(s.code,{children:"client"})," (une application web g\xe9n\xe9ralement)."]}),"\n",(0,n.jsxs)(s.p,{children:["Probl\xe9me, dans un ",(0,n.jsx)(s.code,{children:"cluster"})," (swarm ou k8s), on ne sait pas o\xf9 sont les services. Il ne serait pas raisonnable d'exposer tous les services sur des ports diff\xe9rents."]}),"\n",(0,n.jsxs)(s.p,{children:["Si vous exposiez tous les services sur des ports differents, cela voudrait dire que votre ",(0,n.jsx)(s.code,{children:"client"})," devrait requ\xeater ces derniers via une ",(0,n.jsx)(s.code,{children:"URL"})," absolue (le port n'est pas inclut dans une requ\xeate relative)."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"# absolute request (to never do)\nGET http://host:port/path1/path2?param1=value1&param2=value2\n# relative request from root\nGET /path1/path2?param1=value1&param2=value2\n# relative request from path of current path (to avoid)\nGET path2?param1=value1&param2=value2\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Ce qui n'est pas envisageable. Imaginez que vous deviez livrer chaque ",(0,n.jsx)(s.code,{children:"client"})," avec des ",(0,n.jsx)(s.code,{children:"urls"})," differentes et g\xe9rer tous les services avec des ports distincts. Cela deviendrait tr\xe8s rapidement ing\xe9rable."]}),"\n",(0,n.jsxs)(s.p,{children:["Heureusement, les ",(0,n.jsx)(s.code,{children:"clusters"})," ont leut propre gestionnaire de ",(0,n.jsx)(s.code,{children:"DNS"}),", l'",(0,n.jsx)(s.code,{children:"ingress"}),". Dans le ",(0,n.jsx)(s.code,{children:"cluster"})," chaque microservice est identifi\xe9 par un nom fixe."]}),"\n",(0,n.jsxs)(s.p,{children:["L'",(0,n.jsx)(s.code,{children:"ingress"})," maintiendra la r\xe9solution des services par leur nom. Quelque soit le nombre d'instances de celui ci, leur positions (multi noeuds) ou leur ",(0,n.jsx)(s.code,{children:"IPs"}),". Mais l'",(0,n.jsx)(s.code,{children:"ingress"})," n'est pas accessible de l'exterieur du ",(0,n.jsx)(s.code,{children:"cluster"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["L'",(0,n.jsx)(s.code,{children:"API Gateway"})," sera le mandataire unique qui va permettre de resoudre les services dans le ",(0,n.jsx)(s.code,{children:"cluster"})," \xe0 partir du ",(0,n.jsx)(s.code,{children:"client"})," qui est \xe0 l'exterieur du ",(0,n.jsx)(s.code,{children:"cluster"})," (en g\xe9n\xe9ral un navigateur web)."]}),"\n",(0,n.jsxs)(s.p,{children:["Imaginez un service web ",(0,n.jsx)(s.code,{children:"foo-service"})," d\xe9ploy\xe9 dans le ",(0,n.jsx)(s.code,{children:"cluster"}),". Il expose un enpoint ",(0,n.jsx)(s.code,{children:"GET api/v1/bar"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["\xc0 l'exterieur du ",(0,n.jsx)(s.code,{children:"cluster"})," vous voulez bien s\xfbr acc\xe9der \xe0 ce ",(0,n.jsx)(s.code,{children:"endpoint"}),". Une application web (",(0,n.jsx)(s.code,{children:"HTML/CSS/JS"}),"), probablement elle m\xeame issue d'un microservice dans le ",(0,n.jsx)(s.code,{children:"cluster"}),".\nCette application ne connait pas directement l'",(0,n.jsx)(s.code,{children:"IP"})," ou le ",(0,n.jsx)(s.code,{children:"DNS"})," de ",(0,n.jsx)(s.code,{children:"foo-service"}),".",(0,n.jsx)(s.br,{}),"\n","En revanche elle sait interroger le serveur dont est issue l'application elle m\xeame.",(0,n.jsx)(s.br,{}),"\n","En relatif elle pourra donc interroger le service ",(0,n.jsx)(s.code,{children:"./foo/api/v1/bar"}),". (notez le prefix ",(0,n.jsx)(s.code,{children:"foo"})," qui peut diff\xe9rer du nom du service ",(0,n.jsx)(s.code,{children:"foo-service"}),")",(0,n.jsx)(s.br,{}),"\n","Cette requ\xeate arrivera sur l'",(0,n.jsx)(s.code,{children:"API Gateway"})," qui elle sait que les requ\xeates prefix\xe9e par ",(0,n.jsx)(s.code,{children:"foo"})," doivent \xeatre redirig\xe9es vers le service ",(0,n.jsx)(s.code,{children:"foo-service"}),". Et voil\xe0 le tour est jou\xe9."]}),"\n",(0,n.jsxs)(s.p,{children:["Maintenant que l'int\xearet premier de l'",(0,n.jsx)(s.code,{children:"API Gateway"})," est touch\xe9 du doigt. Qu'est ce que cela implique."]}),"\n",(0,n.jsx)(s.p,{children:"Puisque celle ci se trouve en frontal de notre application. Elle va pouvoir prendre en charge un certain nombre de choses pour nous."}),"\n",(0,n.jsxs)(s.p,{children:["Par exemple la partie authentification et autorisation. En effet puisque l'",(0,n.jsx)(s.code,{children:"API Gateway"})," est la porte d'entr\xe9e de nos services, cela semble un bon choix de lui d\xe9leguer cette t\xe2che."]}),"\n",(0,n.jsx)(s.h3,{id:"app-gateway",children:"APP Gateway"}),"\n",(0,n.jsxs)(s.p,{children:["Le routage, fonction premi\xe8re des ",(0,n.jsx)(s.code,{children:"API Gateway"})," est (j'esp\xe8re) tr\xe9s bien prise en charge par les ",(0,n.jsx)(s.code,{children:"API Gateway"})," du march\xe9.\nParfois cela passe par des fichiers de configuration assez obscure mais pourquoi pas."]}),"\n",(0,n.jsx)(s.p,{children:"En revanche leur r\xf4les s'arrete en g\xe9neral l\xe0. Si la plupart propose des m\xe9canismes basiques d'authentification via des fichiers d'utilsateurs en dur. Cela ne peut bien s\xfbr pas \xeatre utilis\xe9 en production."}),"\n",(0,n.jsxs)(s.p,{children:["De plus la partie autorisation se limite aux routes puisque ce sont les seuls objets connus de l'",(0,n.jsx)(s.code,{children:"API Gateway"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["En g\xe9neral toutes les ",(0,n.jsx)(s.code,{children:"API Gateway"})," propose de connecter celle ci \xe0 des services externes tel que ",(0,n.jsx)(s.code,{children:"KeyCloack"})," ou autre ",(0,n.jsx)(s.code,{children:"Okta"})," via ",(0,n.jsx)(s.code,{children:"oauth2"})," pour prendre en charge l'authentification et les autorisations.\nCeci est bien s\xfbr une bonne solution en soit de d\xe9leguer cela \xe0 un service tier. Mais de notre point de vue cela complexifie grandement l'architecture de l'application, surtout pour des applications ",(0,n.jsx)(s.code,{children:"on-premise"})," et encore plus pour des applications qui sont install\xe9 dans un r\xe9seau priv\xe9e (sans internet)."]}),"\n",(0,n.jsxs)(s.p,{children:["L'",(0,n.jsx)(s.code,{children:"APP Gateway"})," va donc proposer un certain nombre de services dont la partie authentification et autorisation, cl\xe9 en main."]})]})}function u(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},1151:(e,s,r)=>{r.d(s,{Z:()=>l,a:()=>c});var n=r(7294);const i={},t=n.createContext(i);function c(e){const s=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(t.Provider,{value:s},e.children)}}}]);