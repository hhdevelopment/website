"use strict";(self.webpackChunksoftwarity=self.webpackChunksoftwarity||[]).push([[4320],{1289:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>a,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=i(5893),n=i(1151);const o={slug:"route-predicate",title:"Define the Predicate",authors:"fachache",tags:[]},s=void 0,c={id:"tuto/route/route-predicate",title:"Define the Predicate",description:"The order of route execution is important. The first route whose predicate matches the request will be executed.",source:"@site/docs/tuto/route/route-predicate.md",sourceDirName:"tuto/route",slug:"/tuto/route/route-predicate",permalink:"/tuto/route/route-predicate",draft:!1,unlisted:!1,editUrl:"https://github.com/softwarity/website/tree/main/docs/tuto/route/route-predicate.md",tags:[],version:"current",frontMatter:{slug:"route-predicate",title:"Define the Predicate",authors:"fachache",tags:[]},sidebar:"tutoSidebar",previous:{title:"Authentication",permalink:"/tuto/route/auth"},next:{title:"Define filters",permalink:"/tuto/route/filter"}},a={},d=[{value:"The Path Route Predicate",id:"the-path-route-predicate",level:2}];function h(e){const t={admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",ul:"ul",...(0,n.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsx)(t.p,{children:"The order of route execution is important. The first route whose predicate matches the request will be executed."})}),"\n",(0,r.jsx)(t.p,{children:"We now need to define the condition for the route's execution."}),"\n",(0,r.jsx)(t.p,{children:"Let's go to the Predicates section."}),"\n",(0,r.jsx)(t.admonition,{type:"info",children:(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"ARCHWAY"})," offers a collection of predicates, mostly derived from the framework it is based on, ",(0,r.jsx)(t.code,{children:"Spring cloud gateway"}),"."]})}),"\n",(0,r.jsx)(t.h2,{id:"the-path-route-predicate",children:"The Path Route Predicate"}),"\n",(0,r.jsxs)(t.p,{children:["Here we will use the ",(0,r.jsx)(t.code,{children:"Path"})," predicate. This means that if the path matches the predicate, the route will be executed."]}),"\n",(0,r.jsxs)(t.p,{children:["Add a ",(0,r.jsx)(t.code,{children:"Path"})," type predicate."]}),"\n",(0,r.jsx)(t.p,{children:"Enter:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Path: ",(0,r.jsx)(t.code,{children:"/**"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["This means that any routes starting with ",(0,r.jsx)(t.code,{children:"/**"})," will execute this route."]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"create-route-predicate",src:i(8720).Z+"",width:"1726",height:"1378"})}),"\n",(0,r.jsxs)(t.p,{children:["This makes sense when the route is the default application managed by ",(0,r.jsx)(t.code,{children:"ARCHWAY"}),".\nNormally, each route should be discriminated by different paths, such as ",(0,r.jsx)(t.code,{children:"/service1"}),", ",(0,r.jsx)(t.code,{children:"/service2"}),", etc..."]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["If we had used a subpath, it would probably be appropriate to add a ",(0,r.jsx)(t.code,{children:"StripPrefix"})," request filter to remove the route prefix."]})}),"\n",(0,r.jsx)(t.admonition,{type:"tip",children:(0,r.jsx)(t.p,{children:"You can sort the routes by dragging and dropping."})}),"\n",(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"/**"})," route should always be in the last position.\nMake sure that the ",(0,r.jsx)(t.code,{children:"/**"})," route is last on the list."]})}),"\n",(0,r.jsx)(t.admonition,{type:"warning",children:(0,r.jsx)(t.p,{children:"Of course, each microservice should have a different predicate."})})]})}function u(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8720:(e,t,i)=>{i.d(t,{Z:()=>r});const r=i.p+"assets/images/create-route-predicate-377b881cacaf3becf47f28c9cbb50373.png"},1151:(e,t,i)=>{i.d(t,{Z:()=>c,a:()=>s});var r=i(7294);const n={},o=r.createContext(n);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);